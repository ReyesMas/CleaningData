Course Project - Getting and Cleaning Data (Coursera)
=====================================================

Index
-----

1. Introduction
    * Downloading the data    
    * A brief description of the raw data
        * Features
        * Activities
        * Training Data
        * Test Data
        
2. The "run_analysis.R" script
    * How to run it
    * The products obtained
        * "R" Objects
        * Files
    

1. Introduction
---------------
The porpouse of this "Readme" file is to explain how the scrip "run_analisys.R" works and what it does.

The scrip has been developed for the project course of "Getting and Cleaning Data", a course offered by Coursera.

The goal of the script is to get a tidy data set from the raw data provided by the course for this activity.

The data linked to from the course website represent data collected from the accelerometers from the Samsung Galaxy S smartphone. A full description is available at the site where the data was obtained:

http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones

Here are the data for the project:

https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip 

### Downloading the data

The first thing the scirpt does is to check whether the folder **"UCI HAR Dataset"** exists in the working directory. The scrip needs, to work properly, that the following file structure exists in the working directory:

* Folder UCI HAR Dataset
    * File activity_labels.txt
    * File featuers.txt
    * Folder test
        * File X_test.txt
        * File subject_test.txt
        * File y_test.txt
    * Folder train
        * File X_train.txt
        * File subject_train.txt
        * File y_train.txt

However, in order to facilitate the work, if the **"UCI HAR Dataset"** folder does not exist, the program will attempt to download and unzip it from de link provided above.  

The description of the variables, data, and any transformations or work that is performed to clean up the raw data can be found in the **"CodeBook.md"** file, which is provided together with the "README.MD" file. I highly recommend reading that file before you continue this reading, even so, below there is a brief description of the principal files in "UCI HAR Dataset" and their contents.

### A brief description of the raw data

The experiments have been carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (**WALKING, WALKING UPSTAIRS, WALKING DOWNSTAIRS, SITTING, STANDING, LAYING**) wearing a smartphone (Samsung Galaxy S II) on the waist. Using its embedded accelerometer and gyroscope, we captured 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The experiments have been video-recorded to label the data manually. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data.

The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force is assumed to have only low frequency components, therefore a filter with 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain. 

#### Features
The list of the features can be found in the "UCI HAR Dataset/features.txt" file. The feature list is the same for both, the training sample and the test sample. There are a total of 561 features

#### Activities
The list of the activities can be found in the "UCI HAR Dataset/activity_labels.txt" file which contains the links between class labels and activity names. There are six activities.

#### Training Data
* The file "UCI HAR Dataset/train/X_train.txt" contains the feature training set. Each record is a 561-feature vector with time and frecuency domain variables. 
* The activity that corresponds to each record is found in the "UCI HAR Dataset/train/Y_train.txt" file. This file contains the class label. 
* The subject who performed the activity for each record is in the "UCI HAR Dataset/train/subject_train.txt" file.

It is important to note that the order of the rows in the "Y_train.txt" and "subject_train.txt" files corresponds to the order of the rows in the "X_train.txt" file. In the same way, the order of the variables in the "X_train.txt" file corresponds to the order of the features in the "features.txt" file.

#### Test Data
The test data are organized in the same way as training data.
* The feature test set is in the file "UCI HAR Dataset/test/X_test.txt"
* The activity that corresponds to each record is found in the "UCI HAR Dataset/test/Y_test.txt" file
* The subject who performed the activity for each record is in the "UCI HAR Dataset/test/subject_test.txt" file.
        
The "run_analysis.R" script
---------------------------

The goal of the script is to get a tidy data set with the average of each variable for each activity and each subject.

### How to run it

You can run it using the source function. For example, if the scrip is in your working directory you can  type source("run_analysis.R") at the prompt line.

As we said before, the first thing the script does is to check whether the folder **"UCI HAR Dataset"** exists in the working directory, since the script needs it to work properly. However, in order to facilitate the work, if that folder does not exist, the program will attempt to download it. Download and unzip the file takes quite time, so make sure that if there is no folder named "UCI HAR Dataset" in the working directory is because you want the data to be downloaded.

### The products obtained

### _"R" Objects_

At the end of script execution the following "R" objects will be available in the environment.

#### Data frame "activityLabels"
The links between class labels and activity names.

'data.frame':    6 obs. of  2 variables:
 $ activity_id  : int  1 2 3 4 5 6
 $ activity_name: Factor w/ 6 levels "LAYING","SITTING",..: 4 6 5 2 3 1
 
#### Data frame "features"
The features list.

'data.frame':    561 obs. of  2 variables:       
 $ feature_id  : int  1 2 3 4 5 6 7 8 9 10 ...      
 $ feature_name: chr  "tBodyAcc-mean()-X" "tBodyAcc-mean()-Y" "tBodyAcc-mean()-Z" "tBodyAcc-std()-X" ...      
 
     
#### Data frame "WholeData"
A data frame which includes the training set, the test set, and for each row an identifier of the subject who carried out the experiment and the activity the subject has performed. Apropiate descriptive variable names are used.

    'data.frame':    10299 obs. of  563 variables:
    $ subject_id                    : int  1 1 1 1 1 1 1 1 1 1 ...
    $ activity                      : Factor w/ 6 levels "WALKING","WALKING_UPSTAIRS",..: 5 5 5 5 5 5 5 5 5 5 ...
    $ tBodyAcc_mean_X               : num  0.289 0.278 0.28 0.279 0.277 ...
    $ tBodyAcc_mean_Y               : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
    $ tBodyAcc_mean_Z               : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
     [list output truncated]

#### vector "subjectTest"
Subjects selected for generating the test data

    int [1:9] 2 4 9 10 12 13 18 20 24

#### vector "subjectTrain"
Subjects selected for generating the training  data

    int [1:21] 1 3 5 6 7 8 11 14 15 16 17 19 21 22 23 25 26 27 28 29 30
    
#### Data frame "extractData"
A data frame which includes for each row an identifier of the subject who carried out the experiment, the activity the subject has performed and the measurements on the mean and standard deviation for each measurement. Apropiate descriptive varaible names are used.

    'data.frame':    10299 obs. of  66 variables:     
    $ tBodyAcc_mean_X          : num  0.289 0.278 0.28 0.279 0.277 ...     
    $ tBodyAcc_mean_Y          : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...      
    $ tBodyAcc_mean_Z          : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...           
    $ tBodyAcc_std_X           : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...             
    $ tBodyAcc_std_Y           : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...          
    $ tBodyAcc_std_Z           : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...     
    $ tGravityAcc_mean_X       : num  0.963 0.967 0.967 0.968 0.968 ...
    $ tGravityAcc_mean_Y       : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
    $ tGravityAcc_mean_Z       : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
    $ tGravityAcc_std_X        : num  -0.985 -0.997 -1 -0.997 -0.998 ...
    $ tGravityAcc_std_Y        : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
    $ tGravityAcc_std_Z        : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
    $ tBodyAccJerk_mean_X      : num  0.078 0.074 0.0736 0.0773 0.0734 ...
    $ tBodyAccJerk_mean_Y      : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
    $ tBodyAccJerk_mean_Z      : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
    $ tBodyAccJerk_std_X       : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
    $ tBodyAccJerk_std_Y       : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
    $ tBodyAccJerk_std_Z       : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
    $ tBodyGyro_mean_X         : num  -0.0061 -0.0161 -0.0317 -0.0434 -0.034 ...
    $ tBodyGyro_mean_Y         : num  -0.0314 -0.0839 -0.1023 -0.0914 -0.0747 ...
    $ tBodyGyro_mean_Z         : num  0.1077 0.1006 0.0961 0.0855 0.0774 ...
    $ tBodyGyro_std_X          : num  -0.985 -0.983 -0.976 -0.991 -0.985 ...
    $ tBodyGyro_std_Y          : num  -0.977 -0.989 -0.994 -0.992 -0.992 ...
    $ tBodyGyro_std_Z          : num  -0.992 -0.989 -0.986 -0.988 -0.987 ...
    $ tBodyGyroJerk_mean_X     : num  -0.0992 -0.1105 -0.1085 -0.0912 -0.0908 ...
    $ tBodyGyroJerk_mean_Y     : num  -0.0555 -0.0448 -0.0424 -0.0363 -0.0376 ...
    $ tBodyGyroJerk_mean_Z     : num  -0.062 -0.0592 -0.0558 -0.0605 -0.0583 ...
    $ tBodyGyroJerk_std_X      : num  -0.992 -0.99 -0.988 -0.991 -0.991 ...
    $ tBodyGyroJerk_std_Y      : num  -0.993 -0.997 -0.996 -0.997 -0.996 ...
    $ tBodyGyroJerk_std_Z      : num  -0.992 -0.994 -0.992 -0.993 -0.995 ...
    $ tBodyAccMag_mean         : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
    $ tBodyAccMag_std          : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
    $ tGravityAccMag_mean      : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
    $ tGravityAccMag_std       : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
    $ tBodyAccJerkMag_mean     : num  -0.993 -0.991 -0.989 -0.993 -0.993 ...
    $ tBodyAccJerkMag_std      : num  -0.994 -0.992 -0.99 -0.993 -0.996 ...
    $ tBodyGyroMag_mean        : num  -0.969 -0.981 -0.976 -0.982 -0.985 ...
    $ tBodyGyroMag_std         : num  -0.964 -0.984 -0.986 -0.987 -0.989 ...
    $ tBodyGyroJerkMag_mean    : num  -0.994 -0.995 -0.993 -0.996 -0.996 ...
    $ tBodyGyroJerkMag_std     : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
    $ fBodyAcc_mean_X          : num  -0.995 -0.997 -0.994 -0.995 -0.997 ...
    $ fBodyAcc_mean_Y          : num  -0.983 -0.977 -0.973 -0.984 -0.982 ...
    $ fBodyAcc_mean_Z          : num  -0.939 -0.974 -0.983 -0.991 -0.988 ...
    $ fBodyAcc_std_X           : num  -0.995 -0.999 -0.996 -0.996 -0.999 ...
    $ fBodyAcc_std_Y           : num  -0.983 -0.975 -0.966 -0.983 -0.98 ...
    $ fBodyAcc_std_Z           : num  -0.906 -0.955 -0.977 -0.99 -0.992 ...
    $ fBodyAccJerk_mean_X      : num  -0.992 -0.995 -0.991 -0.994 -0.996 ...
    $ fBodyAccJerk_mean_Y      : num  -0.987 -0.981 -0.982 -0.989 -0.989 ...
    $ fBodyAccJerk_mean_Z      : num  -0.99 -0.99 -0.988 -0.991 -0.991 ...
    $ fBodyAccJerk_std_X       : num  -0.996 -0.997 -0.991 -0.991 -0.997 ...
    $ fBodyAccJerk_std_Y       : num  -0.991 -0.982 -0.981 -0.987 -0.989 ...
    $ fBodyAccJerk_std_Z       : num  -0.997 -0.993 -0.99 -0.994 -0.993 ...
    $ fBodyGyro_mean_X         : num  -0.987 -0.977 -0.975 -0.987 -0.982 ...
    $ fBodyGyro_mean_Y         : num  -0.982 -0.993 -0.994 -0.994 -0.993 ...
    $ fBodyGyro_mean_Z         : num  -0.99 -0.99 -0.987 -0.987 -0.989 ...
    $ fBodyGyro_std_X          : num  -0.985 -0.985 -0.977 -0.993 -0.986 ...
    $ fBodyGyro_std_Y          : num  -0.974 -0.987 -0.993 -0.992 -0.992 ...
    $ fBodyGyro_std_Z          : num  -0.994 -0.99 -0.987 -0.989 -0.988 ...
    $ fBodyAccMag_mean         : num  -0.952 -0.981 -0.988 -0.988 -0.994 ...
    $ fBodyAccMag_std          : num  -0.956 -0.976 -0.989 -0.987 -0.99 ...
    $ fBodyBodyAccJerkMag_mean : num  -0.994 -0.99 -0.989 -0.993 -0.996 ...
    $ fBodyBodyAccJerkMag_std  : num  -0.994 -0.992 -0.991 -0.992 -0.994 ...
    $ fBodyBodyGyroMag_mean    : num  -0.98 -0.988 -0.989 -0.989 -0.991 ...
    $ fBodyBodyGyroMag_std     : num  -0.961 -0.983 -0.986 -0.988 -0.989 ...
    $ fBodyBodyGyroJerkMag_mean: num  -0.992 -0.996 -0.995 -0.995 -0.995 ...
    $ fBodyBodyGyroJerkMag_std : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...


#### Data frame "final"
A data frame with the average of each variable for each activity and each subject from the WholeData.  Apropiate descriptive varaible names are used. 

    'data.frame':    180 obs. of  563 variables:
    $ activity                      : Factor w/ 6 levels "LAYING","SITTING",..: 4 4 4 4 4 4 4 4 4 4 ...
    $ subject_id                    : int  1 2 3 4 5 6 7 8 9 10 ...
    $ tBodyAcc_mean_X               : num  0.277 0.276 0.276 0.279 0.278 ...
    $ tBodyAcc_mean_Y               : num  -0.0174 -0.0186 -0.0172 -0.0148 -0.0173 ...
    $ tBodyAcc_mean_Z               : num  -0.111 -0.106 -0.113 -0.111 -0.108 ...
    $ tBodyAcc_std_X                : num  -0.284 -0.424 -0.36 -0.441 -0.294 ...
     [list output truncated]


### _Files_

Also, the following files will have been created in the working directory.

#### File "TidyDataSet.txt"

The file "TidyDataSet.txt" contains the data frame "final". We are used the write.table function to write the data frame to a file.

The first row of the file has got the variable names. The first column contains the row names and is not, itself, a variable.
The row names are formed by the subject identification plus a period plus the activity name.
The first variable is de activity name.

   
